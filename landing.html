<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Запись — PipeKit</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Bounded:wght@800&family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
  font-family: 'Inter', sans-serif;
  background: url('fon4.jpg') no-repeat center center fixed;
  background-size: cover;
  color: #3D3D3D;
}

    .font-bounded { font-family:'Bounded',sans-serif; font-weight:800; }
    .gradient-text { background:linear-gradient(90deg,#8A2BE2,#FF69B4); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
    .cta-button { transition:all .3s ease; box-shadow:0 4px 15px rgba(0,0,0,.08); }
    .cta-button:hover{ transform:translateY(-3px); box-shadow:0 6px 20px rgba(138,43,226,.2); }
    .example-day{ transition:all .18s ease-in-out; padding:.5rem 0; }
    .example-day:not(.disabled):hover{ background:#f3e8ff; cursor:pointer }
    .example-day.selected{ background:#8B5CF6; color:white; border-radius:9999px; }
    .example-day.disabled{ color:#d1d5db; cursor:not-allowed }
    .time-slot{ transition:all .15s ease-in-out; padding:.6rem; border-radius:.5rem; }
    .time-slot:not(.disabled):hover{ background:#8B5CF6; color:white; cursor:pointer }
    .time-slot.disabled{ background:#f3f4f6; color:#d1d5db; cursor:not-allowed }
    @media (max-width:640px){ .grid-cols-7{ font-size:.75rem } }
  </style>
</head>
<body>
  <header class="py-6 px-4">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="font-bounded text-2xl">PipeKit</h1>
    </div>
  </header>

  <main class="container mx-auto px-4 md:px-8 py-8">
    <section class="max-w-4xl mx-auto bg-white rounded-2xl shadow-xl p-6 md:p-8">
        <!-- Карточка мастера -->
        <div class="flex flex-col md:flex-row items-center gap-6 mb-8">
          <img src="master.jpg" alt="Анна Волкова" class="w-32 h-32 object-cover rounded-full shadow-lg border-4 border-violet-200">
          <div>
            <h2 class="font-bounded text-3xl">Анна Волкова</h2>
            <p class="text-gray-500 mt-1">Мастер маникюра и педикюра</p>
            <div class="mt-3 space-y-1">
              <p class="flex items-center gap-2"><span class="font-bold">Тел.:</span> <a href="tel:+79999999999" class="text-violet-600 hover:underline">+7 999 999-99-99</a></p>
              <p class="flex items-center gap-2"><span class="font-bold">Telegram:</span> <a href="https://t.me/yourusername" class="text-violet-600 hover:underline">@yourusername</a></p>
              <p class="flex items-center gap-2"><span class="font-bold">Instagram:</span> <a href="https://instagram.com/yourpage" class="text-violet-600 hover:underline">@yourpage</a></p>
            </div>
          </div>
        </div>
      
        <div class="flex flex-col md:flex-row gap-6">
          <!-- Здесь уже идёт календарь и форма, как у тебя -->
      
      <div class="flex flex-col md:flex-row gap-6">
        <!-- Календарь -->
        <div class="w-full md:w-1/2">
          <h3 class="font-bold text-2xl">Студия Анны Волковой</h3>
          <p class="text-gray-500 mt-1">Мастер маникюра и педикюра</p>

          <div class="mt-6">
            <div class="flex justify-between items-center">
              <h4 class="font-bold text-lg" id="calendar-month">Август 2025</h4>
              <div class="space-x-2">
                <button id="prev-month" class="p-1 rounded-full hover:bg-gray-100">&lt;</button>
                <button id="next-month" class="p-1 rounded-full hover:bg-gray-100">&gt;</button>
              </div>
            </div>

            <div class="grid grid-cols-7 gap-2 text-center mt-4 text-sm text-gray-500">
              <span>Пн</span><span>Вт</span><span>Ср</span><span>Чт</span><span>Пт</span><span>Сб</span><span>Вс</span>
            </div>

            <div id="calendar-days" class="grid grid-cols-7 gap-1 text-center mt-2"></div>
          </div>
        </div>

        <!-- Время и форма -->
        <div class="w-full md:w-1/2 border-t md:border-t-0 md:border-l border-gray-200 pt-6 md:pt-0 md:pl-8">
          <h4 class="font-bold">Выберите время</h4>
          <p id="selected-date" class="text-sm text-gray-500">Четверг, 14 августа</p>

          <div id="time-slots" class="grid grid-cols-3 gap-3 mt-4"></div>

          <div class="mt-6">
            <h4 class="font-bold">Ваши данные</h4>
            <form id="booking-form" class="mt-2">
              <input id="fullName" type="text" placeholder="ФИО" required class="mt-2 w-full p-3 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-violet-400">
              <input id="phone" type="tel" placeholder="Номер (телефон)" required class="mt-2 w-full p-3 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-violet-400">
              <input id="tg" type="text" placeholder="Telegram (например @nickname)" class="mt-2 w-full p-3 border border-gray-300 rounded-lg outline-none focus:ring-2 focus:ring-violet-400">
              <input id="secret" type="hidden" value="REPLACE_WITH_SECRET_KEY">
              <button type="submit" class="mt-4 w-full bg-violet-500 text-white font-bold py-3 rounded-lg hover:bg-violet-600 transition-colors">Записаться</button>
            </form>
            <p id="form-message" class="mt-2 text-sm hidden"></p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="text-center mt-10 text-gray-500">
    © 2025 PipeKit
  </footer>

<script>
  // ==== Настройки ====
  const APPS_SCRIPT_URL = 'https://твойдомен.ru/send_telegram.php'; // <- замените
  // храните в форме "secret" какое-нибудь значение и проверяйте его на стороне Apps Script для базовой защиты

  // === Календарь и слоты (как на главной) ===
  const daysContainer = document.getElementById('calendar-days');
  const monthDisplay = document.getElementById('calendar-month');
  const prevMonthBtn = document.getElementById('prev-month');
  const nextMonthBtn = document.getElementById('next-month');
  const selectedDateDisplay = document.getElementById('selected-date');
  const timeSlotsContainer = document.getElementById('time-slots');
  const bookingForm = document.getElementById('booking-form');
  const formMessage = document.getElementById('form-message');

  let currentDate = new Date(); // текущий месяц
  let selectedDate = new Date(); // по умолчанию сегодня

  const timeSlots = [
    { time: '10:00', available: true },
    { time: '11:30', available: true },
    { time: '13:00', available: false },
    { time: '14:30', available: true },
    { time: '16:00', available: true },
    { time: '17:30', available: true }
  ];

  function renderCalendar(){
    daysContainer.innerHTML = '';
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    monthDisplay.textContent = `${currentDate.toLocaleString('ru', { month:'long'})} ${year}`;

    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month+1, 0).getDate();
    const prevMonthDays = firstDay === 0 ? 6 : firstDay - 1;
    const prevMonthLastDay = new Date(year, month, 0).getDate();

    for(let i = prevMonthDays; i>0; i--){
      daysContainer.innerHTML += `<div class="example-day disabled py-2">${prevMonthLastDay - i + 1}</div>`;
    }
    for(let day=1; day<=daysInMonth; day++){
      const isDisabled = false; // логика блокировки — можно расширить
      const isSelected = selectedDate.getDate()===day && selectedDate.getMonth()===month && selectedDate.getFullYear()===year;
      daysContainer.innerHTML += `<div class="example-day py-2 ${isDisabled?'disabled':''} ${isSelected?'selected':''}" data-day="${day}">${day}</div>`;
    }

    document.querySelectorAll('.example-day:not(.disabled)').forEach(day => {
      day.addEventListener('click', () => {
        document.querySelectorAll('.example-day').forEach(d=>d.classList.remove('selected'));
        day.classList.add('selected');
        selectedDate = new Date(year, month, parseInt(day.dataset.day));
        updateSelectedDate();
        renderTimeSlots();
      });
    });
  }

  function updateSelectedDate(){
    selectedDateDisplay.textContent = selectedDate.toLocaleString('ru', { weekday: 'long', day:'numeric', month:'long' });
  }

  function renderTimeSlots(){
    timeSlotsContainer.innerHTML = '';
    timeSlots.forEach(slot => {
      timeSlotsContainer.innerHTML += `<div class="time-slot border border-gray-300 rounded-lg p-3 text-center ${slot.available? '':'disabled'}" data-time="${slot.time}">${slot.time}</div>`;
    });

    document.querySelectorAll('.time-slot:not(.disabled)').forEach(slot => {
      slot.addEventListener('click', () => {
        document.querySelectorAll('.time-slot').forEach(s => s.classList.remove('bg-violet-500','text-white','ring-2'));
        slot.classList.add('bg-violet-500','text-white');
        // пометить выбранный слот в форме (скрытое поле)
        bookingForm.dataset.selectedTime = slot.dataset.time;
      });
    });
  }

  prevMonthBtn.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth()-1); renderCalendar(); });
  nextMonthBtn.addEventListener('click', () => { currentDate.setMonth(currentDate.getMonth()+1); renderCalendar(); });

  bookingForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const fullName = document.getElementById('fullName').value.trim();
    const phone = document.getElementById('phone').value.trim();
    const tg = document.getElementById('tg').value.trim();
    const secret = document.getElementById('secret').value;
    const time = bookingForm.dataset.selectedTime || '';
    const dateIso = selectedDate.toISOString().split('T')[0];

    if(!fullName || !phone || !time){
      formMessage.textContent = 'Пожалуйста, укажите ФИО, телефон и выберите время.';
      formMessage.classList.remove('hidden'); formMessage.classList.add('text-red-600');
      return;
    }

    const payload = {
      secret,
      fullName,
      phone,
      telegram: tg,
      date: dateIso,
      time
    };

    try {
      const r = await fetch(APPS_SCRIPT_URL, {
        method: 'POST',
        mode: 'cors',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(payload)
      });
      const result = await r.json();
      if(result && result.status === 'ok'){
        formMessage.textContent = 'Запись успешно отправлена! Спасибо.';
        formMessage.classList.remove('hidden'); formMessage.classList.remove('text-red-600'); formMessage.classList.add('text-green-600');
        bookingForm.reset();
        bookingForm.dataset.selectedTime = '';
        setTimeout(()=> formMessage.classList.add('hidden'), 3500);
      } else {
        formMessage.textContent = 'Ошибка отправки. Попробуйте позже.';
        formMessage.classList.remove('hidden'); formMessage.classList.add('text-red-600');
      }
    } catch (err){
      console.error(err);
      formMessage.textContent = 'Ошибка сети. Проверьте подключение.';
      formMessage.classList.remove('hidden'); formMessage.classList.add('text-red-600');
    }
  });
  // Инициализация
  renderCalendar();
  renderTimeSlots();
  updateSelectedDate();
</script>
</body>
</html>







